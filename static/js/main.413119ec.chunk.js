(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){e.exports=n(112)},106:function(e,t,n){},108:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(70),l=n.n(i),o=(n(106),n(26)),c=n(27),s=n(36),p=n(28),u=n(39),m=(n(108),n(9)),d=n(75),f=Object(d.a)(new Array(5)).map(function(e,t){return{firstName:"first"+t,lastName:"last"+t,id:t,email:t+"@test.com"}}),E=function(e){return new Promise(function(t){return setTimeout(t,e)})};var b="FETCH_PEOPLE_REQUEST",h="FETCH_PEOPLE_SUCCESS",g="FETCH_PEOPLE_ERROR",v="PERSON_SELECTED",O="TOGGLE_EDITING",N=function(){return function(e){return e({type:b}),E(1e3).then(function(){return f}).then(function(t){return e(function(e){return{type:h,people:e}}(t))}).catch(function(t){return e(function(e){return{type:g,error:e}}(t))})}},j=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"personClicked",value:function(e){this.props.dispatch({type:v,personSelected:e})}},{key:"render",value:function(){var e=this,t=this.props.people.map(function(t,n){var a=e.props.personSelected===n?"selected":"";return r.a.createElement(r.a.Fragment,{key:t.id},r.a.createElement("div",{className:"cell id ".concat(a),onClick:function(n){return e.personClicked(t.id)}},t.id),r.a.createElement("div",{className:"cell firstName ".concat(a),onClick:function(n){return e.personClicked(t.id)}},t.firstName),r.a.createElement("div",{className:"cell lastName ".concat(a),onClick:function(n){return e.personClicked(t.id)}},t.lastName),r.a.createElement("div",{className:"cell email ".concat(a),onClick:function(n){return e.personClicked(t.id)}},t.email))}),n=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cell header id"},"id"),r.a.createElement("div",{className:"cell header firstName"},"First Name"),r.a.createElement("div",{className:"cell header lastName"},"Last Name"),r.a.createElement("div",{className:"cell header email"},"Email"));return r.a.createElement("div",{className:"peoplegrid"},n,t)}}]),t}(r.a.Component);var y=Object(m.b)(function(e){return{people:e.people.people,personSelected:e.people.personSelected}})(j),S=n(60),k=n(45),C=n(59),w=n(43),_=Object(m.b)()(function(e){var t=e.dispatch;return r.a.createElement("button",{type:"button",onClick:function(){return t(Object(w.a)("remoteSubmit"))}},"Submit")}),P=function(e){var t=e.input,n=e.label,a=e.type,i=e.meta,l=i.touched,o=i.error,c=e.editing,s=r.a.createElement("input",Object.assign({},t,{placeholder:n,type:a}));return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,c?s:t.value,l&&o&&r.a.createElement("span",null,o)))},T=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleEditing",value:function(){this.props.dispatch({type:O})}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,a=t.handleSubmit,i={editing:this.props.editing};return r.a.createElement("form",{onSubmit:a,className:"bordered"},r.a.createElement(S.a,{name:"firstName",type:"text",component:P,label:"First Name",props:i}),r.a.createElement(S.a,{name:"lastName",type:"text",component:P,label:"Last Name",props:i}),r.a.createElement(S.a,{name:"email",type:"email",component:P,label:"Email",props:i}),n&&r.a.createElement("strong",null,n),null!==this.props.personSelected&&r.a.createElement("button",{type:"button",onClick:function(t){return e.toggleEditing()}},this.props.editing?"Cancel":"Edit"),this.props.editing&&r.a.createElement(_,null))}}]),t}(r.a.Component);var L=Object(C.a)({form:"remoteSubmit",onSubmit:function(e,t,n){if(n.pristine)throw new k.a({_error:"Nothing changed!"});var a={id:e.id};for(var r in e)n.initialValues[r]!==e[r]&&(a[r]=e[r]);return console.log("the changed fields are:",a),function(e){return new Promise(function(t,n){var a=f.find(function(t){return t.id===e.id}),r=f.indexOf(a),i=Object.assign({},a,e);return f.splice(r,1,i),t({ok:!0})})}(a).then(n.dispatch(N()))},validate:function(e){var t={};return e.firstName||(t.firstName="Please enter a first name"),e.lastName||(t.lastName="Please enter a last name"),e.email||(t.email="Please enter an email"),t},enableReinitialize:!0})(T),F=Object(m.b)(function(e){var t=e.people.personSelected,n=null!==t?e.people.people[t]:null;return{person:n,initialValues:n,editing:e.people.editing,personSelected:e.people.personSelected}})(L),R=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(N())}},{key:"render",value:function(){return this.props.loadingPeople?r.a.createElement("div",null,"Loading data..."):r.a.createElement("div",{className:"flexcontainer"},r.a.createElement(y,null),r.a.createElement(F,null))}}]),t}(a.Component);var x=Object(m.b)(function(e){return{loadingPeople:e.people.loading}})(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(5),I=n(61),G=n(74),H={people:[],loading:!0,error:null,personSelected:null,editing:!1};var U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.d,V=Object(D.e)(Object(D.c)({form:I.a,people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return t.type===b?Object.assign({},e,{loading:!0,error:null}):t.type===h?Object.assign({},e,{loading:!1,error:null,people:t.people}):t.type===g?Object.assign({},e,{loading:!1,error:t.error}):t.type===v?Object.assign({},e,{personSelected:t.personSelected}):t.type===O?Object.assign({},e,{editing:!e.editing}):e}}),U(Object(D.a)(G.a)));l.a.render(r.a.createElement(m.a,{store:V},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,2,1]]]);
//# sourceMappingURL=main.413119ec.chunk.js.map